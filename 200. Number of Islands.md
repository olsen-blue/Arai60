# Step1
- DFSの典型問題という認識。似た問題を既に解いたことがありました。かつ気に入っている問題なので、ほぼ覚えてしまっています。
- これはvisitedでグリッド管理するのではなく、陸地を見つけたら島１つ丸ごと消し去って海にしていくイメージが好き。（逆に、池の数を求める場合は、池を埋め立てて陸にする。）
- 今回みたいなDFSの挙動については、パワポ上で、適当な長方形みたいな図形を複数重ならないように用意して、それに対して探索しながらワンクリックで色を塗っていく、というイメージを持っています。（そのクリック回数が今回の問題の答え）
- DFS関数はローカル関数にしといた方が、selfたくさん書かずに済むので好きです。
- DFSが停止する場合（基底条件？）を、関数内の一行目にすぐに書いてしまうのが、いいかもしれない。
- dxやdyを用意して、４方向にfor文でループするのは結構見てきたし、書いたこともあるが、用意が大変なので、4行DFSを書いてしまうことにした。
- 遷移時に「if ~~~ and ~~~:」で、遷移OKの式を書くのも見たことありますが、どっちが良いのでしょうか。。。
- 関数名がこれで良いのか、自信がない。最低限、小文字と「_」で構成した
## DFS：AC
```python
class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        height = len(grid)
        width = len(grid[0])
        def dfs_delete_one_island(i, j):
            if i < 0 or height <= i or j < 0 or width <= j or grid[i][j] == "0":
                return
            grid[i][j] = "0"
            dfs_delete_one_island(i+1, j)
            dfs_delete_one_island(i, j+1)
            dfs_delete_one_island(i-1, j)
            dfs_delete_one_island(i, j-1)

        num_of_islands = 0
        for i in range(height):
            for j in range(width):
                if grid[i][j] == "1":
                    dfs_delete_one_island(i, j)
                    num_of_islands += 1
        return num_of_islands
```

# Step2
- PRを見てみる。
- スタック、キュー。UnionFindなどを使っているものがあったが、シンプルな方が好きなので、現状維持。
- DFSやBFSという名前は関数名としては良くないらしい。「delete_one_island_by_dfs」とかにしようかなと感じる。
- https://github.com/Hurukawa2121/leetcode/pull/17/files#r1898583926
- このあたりの方々のコードが自分と近そう。
- https://github.com/Mike0121/LeetCode/pull/34/files
- https://github.com/tshimosake/arai60/pull/8/files
- 「height」「width」ではなく、「num_rows」「num_cols」でも良いかもと感じる。もう好みでしょうか...
- https://github.com/kazukiii/leetcode/pull/18/files
## DFS：AC：関数名のみ修正
```python
class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        height = len(grid)
        width = len(grid[0])
        def delete_one_island_by_dfs(i, j):
            if i < 0 or height <= i or j < 0 or width <= j or grid[i][j] == "0":
                return
            grid[i][j] = "0"
            delete_one_island_by_dfs(i+1, j)
            delete_one_island_by_dfs(i, j+1)
            delete_one_island_by_dfs(i-1, j)
            delete_one_island_by_dfs(i, j-1)

        num_of_islands = 0
        for i in range(height):
            for j in range(width):
                if grid[i][j] == "1":
                    delete_one_island_by_dfs(i, j)
                    num_of_islands += 1
        return num_of_islands
```

# Step3
- 再現性の確認。微修正含め4分ほどでAC。
```python
class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        height = len(grid)
        width = len(grid[0])
        def delete_one_island_by_dfs(i, j):
            if i < 0 or height <= i or j < 0 or width <= j or grid[i][j] == "0":
                return
            grid[i][j] = "0"
            delete_one_island_by_dfs(i+1, j)
            delete_one_island_by_dfs(i, j+1)
            delete_one_island_by_dfs(i-1, j)
            delete_one_island_by_dfs(i, j-1)

        num_of_islands = 0
        for i in range(height):
            for j in range(width):
                if grid[i][j] == "1":
                    delete_one_island_by_dfs(i, j)
                    num_of_islands += 1
        return num_of_islands
```
# Step4
- 下記のコメントに基づき、コードの更なる改善を図る。
- DFSストップ時のif条件修正と、「VISITED = 2」の利用。
- https://github.com/tarinaihitori/leetcode/pull/18/files#r1843119848
- https://github.com/Mike0121/LeetCode/pull/36/files#r1663838583
- 「VISITED = 2」使うなら、関数名も変えなくては、「count_one_island_by_dfs」とかだろうか。

```python
class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        WATER = "0"
        LAND = "1"
        VISITED = "2"
        height = len(grid)
        width = len(grid[0])
        def count_one_island_by_dfs(i, j):
            if not(0 <= i < height and 0 <= j < width):
                return
            if grid[i][j] == WATER or grid[i][j] == VISITED:
                return
            grid[i][j] = VISITED
            count_one_island_by_dfs(i+1, j)
            count_one_island_by_dfs(i, j+1)
            count_one_island_by_dfs(i-1, j)
            count_one_island_by_dfs(i, j-1)

        num_of_islands = 0
        for i in range(height):
            for j in range(width):
                if grid[i][j] == LAND:
                    count_one_island_by_dfs(i, j)   #ここ読んだ時に何の関数なのか分かるようにしたい
                    num_of_islands += 1
        return num_of_islands
```
